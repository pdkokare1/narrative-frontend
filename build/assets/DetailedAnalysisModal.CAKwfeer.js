import{j as e}from"./vendor-utils.C5aUNQjH.js";import{r as k}from"./vendor-react.CunEISTA.js";import{B as f,t as S,v as j}from"./index.BE3a_34f.js";import"./vendor-firebase.CapENl2a.js";import"./vendor-ui.DT2d8rn5.js";import"./vendor-charts.CDFCwfjF.js";const E=({article:s,onClose:a,showTooltip:n})=>{const[l,r]=k.useState("overview");if(!s)return null;const t=c=>{c.target===c.currentTarget&&a()},o=s.analysisType==="SentimentOnly";return e.jsx("div",{className:"modal-overlay",onClick:t,children:e.jsxs("div",{className:"analysis-modal",onClick:c=>c.stopPropagation(),children:[e.jsxs("div",{className:"modal-header",children:[e.jsxs("h2",{style:{fontFamily:"var(--font-heading)",fontSize:"22px"},children:[s.headline.substring(0,60),s.headline.length>60?"...":""]}),e.jsx("button",{className:"close-btn",onClick:a,title:"Close",children:"Ã—"})]}),!o&&e.jsxs("div",{className:"modal-tabs",children:[e.jsx("button",{className:l==="overview"?"active":"",onClick:()=>r("overview"),children:"Overview"}),e.jsx("button",{className:l==="breakdown"?"active":"",onClick:()=>r("breakdown"),children:"Breakdown"})]}),e.jsx("div",{className:"modal-content",children:o?e.jsx(C,{article:s,showTooltip:n}):e.jsxs(e.Fragment,{children:[l==="overview"&&e.jsx(B,{article:s,showTooltip:n}),l==="breakdown"&&e.jsx(w,{article:s,showTooltip:n})]})}),e.jsx("div",{className:"modal-footer",children:e.jsx(f,{variant:"secondary",onClick:a,children:"Close Report"})})]})})},C=({article:s,showTooltip:a})=>e.jsxs("div",{className:"tab-content review-tab-content",children:[e.jsx("h3",{className:"review-type-label",children:" Opinion / Review Analysis "}),e.jsx("p",{className:"review-explainer",children:"This article is identified as an opinion, review, or summary. A full bias and credibility analysis is not applicable."}),e.jsxs("div",{className:"score-circle large-centered",title:"The article's overall sentiment towards its main subject.",onClick:n=>a("The article's overall sentiment towards its main subject.",n),children:[e.jsxs("div",{className:`score-value large ${S(s.sentiment)}`,children:[" ",s.sentiment," "]}),e.jsx("div",{className:"score-label",children:"Overall Sentiment"})]})]}),B=({article:s,showTooltip:a})=>{const n=s.keyFindings&&s.keyFindings.length>0,l=s.recommendations&&s.recommendations.length>0;return e.jsxs("div",{className:"tab-content",children:[e.jsxs("div",{className:"overview-grid",children:[e.jsx(m,{label:"Trust Score",value:s.trustScore,showTooltip:a}),e.jsx(m,{label:"Bias Score",value:s.biasScore,showTooltip:a}),e.jsx(m,{label:"Credibility",value:s.credibilityScore,showTooltip:a}),e.jsx(m,{label:"Reliability",value:s.reliabilityScore,showTooltip:a})]}),n&&e.jsxs("div",{className:"recommendations",children:[e.jsx("h4",{children:"KEY FINDINGS"}),e.jsxs("ul",{children:[" ",s.keyFindings.map((r,t)=>e.jsx("li",{children:r},`kf-${t}`))," "]})]}),l&&e.jsxs("div",{className:"recommendations",children:[e.jsx("h4",{children:"RECOMMENDATIONS"}),e.jsxs("ul",{children:[" ",s.recommendations.map((r,t)=>e.jsx("li",{children:r},`rec-${t}`))," "]})]}),!n&&!l&&e.jsx("p",{className:"no-findings-msg",children:" No specific key findings or recommendations were generated. "})]})},w=({article:s,showTooltip:a})=>{const[n,l]=k.useState(!1),r=s.biasComponents||{},t=s.credibilityComponents||{},o=s.reliabilityComponents||{},c=[{l:"Sentiment Polarity",k:"sentimentPolarity"},{l:"Emotional Language",k:"emotionalLanguage"},{l:"Loaded Terms",k:"loadedTerms"},{l:"Complexity Bias",k:"complexityBias"},{l:"Source Diversity",k:"sourceDiversity"},{l:"Expert Balance",k:"expertBalance"},{l:"Attribution Transparency",k:"attributionTransparency"},{l:"Gender Balance",k:"genderBalance"},{l:"Racial Balance",k:"racialBalance"},{l:"Age Representation",k:"ageRepresentation"},{l:"Headline Framing",k:"headlineFraming"},{l:"Story Selection",k:"storySelection"},{l:"Omission Bias",k:"omissionBias"}],v={...r.linguistic,...r.sourceSelection,...r.demographic,...r.framing},h=c.map(i=>({label:i.l,value:Number(v[i.k])||0})),d=Object.entries(t).map(([i,x])=>({label:y(i),value:Number(x)||0})),b=Object.entries(o).map(([i,x])=>({label:y(i),value:Number(x)||0})),p=h.filter(i=>i.value>0||n),g=d.filter(i=>i.value>0||n),N=b.filter(i=>i.value>0||n);return e.jsxs("div",{className:"tab-content",children:[e.jsxs("div",{className:"component-section",children:[e.jsxs("div",{className:"component-section-header",children:[e.jsxs("h4",{children:["Bias Details (",s.biasScore??"N/A","/100)"]}),e.jsx("div",{className:"toggle-zero-scores",children:e.jsxs("label",{children:[" ",e.jsx("input",{type:"checkbox",checked:n,onChange:()=>l(!n)})," Show 0 Scores "]})})]}),e.jsx("div",{className:"divider"}),e.jsx("div",{className:"component-grid-v2 section-spacing",children:p.length>0?p.map(i=>e.jsx(u,{label:i.label,value:i.value,tooltip:j(i.label),showTooltip:a},i.label)):e.jsx("p",{className:"zero-score-note",children:"All bias components scored 0. Enable toggle to see them."})})]}),e.jsxs("div",{className:"component-section",children:[e.jsx("div",{className:"component-section-header",children:e.jsxs("h4",{children:["Credibility Details (",s.credibilityScore??"N/V","/100)"]})}),e.jsx("div",{className:"divider"}),e.jsx("div",{className:"component-grid-v2 section-spacing",children:g.length>0?g.map(i=>e.jsx(u,{label:i.label,value:i.value,tooltip:j(i.label),showTooltip:a},i.label)):e.jsx("p",{className:"zero-score-note",children:"All credibility components scored 0. Enable toggle to see them."})})]}),e.jsxs("div",{className:"component-section",children:[e.jsx("div",{className:"component-section-header",children:e.jsxs("h4",{children:["Reliability Details (",s.reliabilityScore??"N/V","/100)"]})}),e.jsx("div",{className:"divider"}),e.jsx("div",{className:"component-grid-v2 section-spacing",children:N.length>0?N.map(i=>e.jsx(u,{label:i.label,value:i.value,tooltip:j(i.label),showTooltip:a},i.label)):e.jsx("p",{className:"zero-score-note",children:"All reliability components scored 0. Enable toggle to see them."})})]})]})};function y(s){const a=s.replace(/([A-Z])/g," $1");return a.charAt(0).toUpperCase()+a.slice(1)}const m=({label:s,value:a,showTooltip:n})=>{let l="";switch(s){case"Trust Score":l="Overall Trust Score (0-100). Higher is better.";break;case"Bias Score":l="Overall Bias Score (0-100). Less is better.";break;case"Credibility":l="Credibility Score (0-100).";break;case"Reliability":l="Reliability Score (0-100).";break;default:l=`${s} (0-100)`}return e.jsxs("div",{className:"score-circle",title:l,onClick:r=>n(l,r),children:[e.jsx("div",{className:"score-value",style:{fontFamily:"var(--font-heading)"},children:a??"N/A"}),e.jsx("div",{className:"score-label",children:s})]})},u=({label:s,value:a,tooltip:n,showTooltip:l})=>{const r=Math.max(0,Math.min(100,Number(a)||0)),t=6,o=42,c=2*Math.PI*o,v=c-r/100*c,h="var(--accent-primary)",d=n||`${s}: ${r}/100`;return e.jsxs("div",{className:"circle-progress-container",title:d,onClick:b=>l(d,b),children:[e.jsxs("svg",{className:"circle-progress-svg",width:"100",height:"100",viewBox:"0 0 100 100",children:[e.jsx("circle",{className:"circle-progress-bg",stroke:"var(--bg-elevated)",strokeWidth:t,fill:"transparent",r:o,cx:"50",cy:"50"}),r>0&&e.jsx("circle",{className:"circle-progress-bar",stroke:h,strokeWidth:t,strokeDasharray:c,strokeDashoffset:v,strokeLinecap:"round",fill:"transparent",r:o,cx:"50",cy:"50",transform:"rotate(-90 50 50)"}),e.jsx("text",{x:"50",y:"52",className:"circle-progress-text-value",dominantBaseline:"middle",textAnchor:"middle",style:{fontFamily:"var(--font-heading)"},children:r})]}),e.jsx("div",{className:"circle-progress-label",children:s})]})};export{E as default};
