import{j as e}from"./vendor-utils.C5aUNQjH.js";import{j as k,r as s,L as R}from"./vendor-react.CunEISTA.js";import{b as w,e as A,d as _,S as E,N as T,A as b,B,k as L,l as $,n as F}from"./index.BE3a_34f.js";import{S as P}from"./SectionHeader.Dw_45JcM.js";import"./vendor-firebase.CapENl2a.js";import"./vendor-ui.DT2d8rn5.js";import"./vendor-charts.CDFCwfjF.js";const z=({onAnalyze:u,onCompare:m,savedArticleIds:x,onToggleSave:S,showTooltip:f})=>{const[j]=k(),t=j.get("q"),[o,g]=s.useState([]),[v,c]=s.useState(!0),[l,y]=s.useState(0),[i,d]=s.useState(null),{addToast:h}=w(),{updateContextQueue:p}=A(),{handleShare:N}=_();s.useEffect(()=>{(async()=>{var a;if(t){c(!0);try{const{data:n}=await $(t);g(n.articles||[]),y(((a=n.pagination)==null?void 0:a.total)||0)}catch(n){console.error("Search error:",n),h("Search failed. Please try again.","error")}finally{c(!1)}}})()},[t,h]),s.useEffect(()=>{const r=o.filter(a=>a.type!=="Narrative");r.length>0&&t&&p(r,`Search: ${t}`)},[o,t,p]);const C=r=>{F(r._id).catch(a=>console.error("Log Read Error:",a)),window.open(r.url,"_blank","noopener,noreferrer")};return e.jsxs("div",{className:"content",children:[e.jsx(P,{title:`Search: "${t}"`,subtitle:`Found ${l} result${l!==1?"s":""}`}),v?e.jsx("div",{className:"articles-grid",children:[...Array(6)].map((r,a)=>e.jsx("div",{className:"article-card-wrapper",children:e.jsx(E,{})},a))}):e.jsx(e.Fragment,{children:o.length>0?e.jsx("div",{className:"articles-grid",children:o.map(r=>{if(r.type==="Narrative")return e.jsx("div",{className:"article-card-wrapper",children:e.jsx(T,{data:r,onClick:()=>d(r)})},r._id);{const a=r;return e.jsx("div",{className:"article-card-wrapper",children:e.jsx(b,{article:a,onCompare:()=>m(a),onAnalyze:u,onShare:()=>N(a),onRead:()=>C(a),showTooltip:f,isSaved:x.has(a._id),onToggleSave:()=>S(a)})},a._id)}})}):e.jsxs("div",{className:"placeholder-page",style:{textAlign:"center",marginTop:"50px"},children:[e.jsx("h2",{children:"No results found"}),e.jsxs("p",{style:{color:"var(--text-secondary)",marginBottom:"20px"},children:[`We couldn't find any articles matching "`,t,'".']}),e.jsx(R,{to:"/",style:{textDecoration:"none"},children:e.jsx(B,{variant:"secondary",children:"Back to Feed"})})]})}),i&&e.jsx(L,{data:i,onClose:()=>d(null)})]})};export{z as default};
